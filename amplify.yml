version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm i -g pnpm
        - pnpm install --no-frozen-lockfile
    build:
      commands:
        - NODE_OPTIONS=--max-old-space-size=14336 pnpm build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
buildImage:
  env:
    COMPUTE_TYPE: 'LARGE'